<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crm.dao.mapper.CodeDao">
  <resultMap id="BaseResultMap" type="me.gacl.domain.Code">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 16 20:29:08 CST 2016.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="discount_code" jdbcType="VARCHAR" property="discountCode" />
    <result column="status" javaType="INTEGER" property="status"/>
  </resultMap>

  <insert id="insert" useGeneratedKeys="true" keyColumn="id" parameterType="me.gacl.domain.Code">
    INSERT INTO code(discount_code,status) VALUES (#{discountCode},0);
  </insert>

  <select id="selectAllCode" resultMap="BaseResultMap">
    select * from code where id = #{id};
  </select>

  <select id="queryCode" resultMap="BaseResultMap">
    select * from code;
  </select>

  <update id="batchUpdateStatus">
    update
      code
    set
      status = 1
    WHERE discount_code IN
    <foreach collection="codeList" item="code" open="(" separator="," close=")">
      #{code}
    </foreach>
    AND status = 0
  </update>

  <update id="updateStatus">
    update
    code
    set
    status = 1
    WHERE  id =#{id}
    AND status = 0
  </update>
</mapper>